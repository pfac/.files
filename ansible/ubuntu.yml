---
- hosts: localhost
  become: yes
  tasks:
    - name: Ensure APT is up-to-date
      apt:
        name: "*"
        state: latest
        autoclean: yes
        autoremove: yes
        force_apt_get: yes
        update_cache: yes

    - name: Ensure APT packages are installed
      apt:
        name:
          - bash
          - curl
          - git
          - neovim
          - nodejs
          - python
          - ruby
          - tilix
          - tmux
          - vim
          - zsh
        force_apt_get: yes
        update_cache: yes

    - name: Ensure Tilix is the default terminal
      alternatives:
        name: x-terminal-emulator
        path: /usr/bin/tilix.wrapper

- hosts: localhost
  tasks:
    - name: Ensure ASDF is installed
      git:
        repo: https://github.com/asdf-vm/asdf.git
        dest: "{{ lookup('env', 'HOME') }}/.asdf"
        version: v0.6.0

    - name: Load dconf configurations
      shell: "dconf load /{{ item | replace('.', '/') }}/ < '{{ lookup('env', 'HOME') }}/Developer/pfac/.files/dconf/{{ item }}'"
      with_items:
        - com.gexperts.Tilix
        - org.gnome.desktop.input-sources

- import_playbook: common.yml
