#!/usr/bin/env sh
if [[ -z "${SHRC+true}" ]]; then
  export SHRC;

  if [[ -d "${HOME}/local/bin" ]]; then
    echo -n "* Setting up local user packages..."
    export PATH="${HOME}/local/bin:$PATH"
    echo "DONE"
  fi

  if type brew &> /dev/null; then
    # Initialize NVM (if installed through Homebrew)
    if brew list | grep nvm &> /dev/null; then
      echo -n "* Setting up Node Version Manager... "
      export NVM_DIR="${HOME}/.nvm"
      [[ -s "$(brew --prefix nvm)/nvm.sh" ]] &&
        source "$(brew --prefix nvm)/nvm.sh"
      echo "DONE"
    fi
  fi

  # Add Linuxbrew to PATH
  if [[ -d "${HOME}/.linuxbrew/bin" ]]; then
    echo -n "* Setting up Linuxbrew... "
    export PATH="${HOME}/.linuxbrew/bin:${PATH}"
    echo "DONE"
  fi

  # Add Heroku Toolbelt to PATH
  if [[ -d "/usr/local/heroku/bin" ]]; then
    echo -n "* Setting up Heroku Toolbelt... "
    export PATH="/usr/local/heroku/bin:$PATH"
    echo "DONE"
  fi

  # Initialize RBEnv (if present)
  if type rbenv &> /dev/null; then
    echo -n "* Setting up RBEnv... "
    eval "$(rbenv init -)"
    echo "DONE"
  fi

  # Initialize RVM (if present)
  if [[ -s "$HOME/.rvm/scripts/rvm" ]]; then
    echo -n "* Setting up RVM... ";
    source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*
    echo "DONE";
  fi
fi
