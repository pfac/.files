#!/usr/bin/env sh
if [[ -z "${SHRC}" ]]; then
  export SHRC='loaded'

  # Add executables in user scope
  if [[ -d "${HOME}/.local/bin" ]]; then
    echo -n "* Setting up local user packages... "
    export PATH="${HOME}/.local/bin:$PATH"
    echo "DONE"
  fi

  # Add libraries in user scope
  if [[ -d "${HOME}/.local/lib" ]]; then
    export LD_LIBRARY_PATH="${HOME}/.local/lib:$LD_LIBRARY_PATH";
  fi

  if type brew &> /dev/null && (brew list | grep asdf &> /dev/null); then
    # Initialize ASDF VM (if installed through Homebrew)
    echo -n '* Setting up asdf... '
    [[ -f /usr/local/opt/asdf/asdf.sh ]] &&
      source /usr/local/opt/asdf/asdf.sh
    echo 'DONE'
  else
    # Initialize ASDF VM (if installed in the home directory)
    if [ -d "${HOME}/.asdf" ]; then
      echo -n "* Setting up asdf... "
      . $HOME/.asdf/asdf.sh
      echo "DONE"
    fi
  fi

  if [[ -f "${HOME}/.cargo/env" ]]; then
    echo -n "* Setting up Rust toolchain... "
    source "${HOME}/.cargo/env"
    echo "DONE"
  fi

  # Add Heroku Toolbelt to PATH
  if [[ -d "/usr/local/heroku/bin" ]]; then
    echo -n "* Setting up Heroku Toolbelt... "
    export PATH="/usr/local/heroku/bin:$PATH"
    echo "DONE"
  fi
fi
